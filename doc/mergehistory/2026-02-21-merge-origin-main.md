# Merge origin/main → llm (2026-02-21)

## Commits from `origin/main`

| SHA | Description | Decision |
|-----|-------------|----------|
| `f8ee7fc` | feat: add Z.AI post-process provider | **Take** – new `PostProcessProvider` entry in `settings.rs` |
| `b90077b` | feat: add "external script" paste method (Linux) | **Partial take** – `ExternalScript` variant, backend + UI integrated, fixed `Input` import for shadcn |
| `2cf5eff` | add translations + fix bindings | **Take** – follow-up i18n keys for external script in 12 locales |
| `e624a45` | toast if exists (duplicate custom word) | **Skip** – llm branch has superior `isDuplicateEntry()` in `DictionaryEntryModal` with full test coverage |
| `15fbc47` | fix(nix): update bunDeps outputHash | **Take** – auto-merged cleanly |
| `3e140e5` | upgrade handy-keys | **Skip** – we don't use `handy-keys` |
| `f367353` | fix handy-keys not firing when in UI | **Take (one-liner)** – `.device_event_filter(Always)` ensures device events fire when app is focused |
| `4fcc974` | Merge branch 'main' (empty merge) | **Skip** – no content |
| `74951cf` | release v0.7.7 | **Partial take** – version bump to 0.7.7, kept Codictate branding |
| `a5c3f88` | Update PR template with feature freeze notice | **Take** – auto-merged cleanly |

## Conflict Resolution

| File | Strategy |
|------|----------|
| `Cargo.toml` | **Hybrid** – kept Codictate branding, updated to v0.7.7 |
| `tauri.conf.json` | **Hybrid** – kept Codictate branding/identifier, updated to v0.7.7 |
| `clipboard.rs` | **Keep ours** + merged `ExternalScript` match arm with `prepared_text` and `did_paste: true`, kept `tracing::info`, added `std::process::Command` |
| `lib.rs` | **Keep ours** + added `.device_event_filter(tauri::DeviceEventFilter::Always)` |
| `bindings.ts` | **Keep ours** + added `external_script_path` field to `AppSettings`, kept `AudioDevice.is_bluetooth` |
| `PasteMethod.tsx` | **Hybrid** – kept our `logInfo` in `onSelect`, merged external script `Input` field, fixed import to shadcn `@/components/shared/ui/input` |
| `en/translation.json` | **Keep ours** – excluded `customWords` section (we use Dictionary), fixed JSON nesting |
| `Cargo.lock` | **Took theirs** – regenerated by cargo |
| `CustomWords.tsx` | **Deleted** – modify/delete conflict, we use `DictionaryPage.tsx` instead |
| `settings.rs` | **Auto-merged** – Z.AI provider + `ExternalScript` variant + `external_script_path` field |
| `shortcut/mod.rs` | **Auto-merged** – `change_external_script_path_setting` command + `ExternalScript` in paste method match |
| `settingsStore.ts` | **Auto-merged** – `external_script_path` updater |
| 16 non-EN i18n files | **Auto-merged** – `externalScript`/`externalScriptPlaceholder` keys |

## Build Fixes

| Error | Fix |
|-------|-----|
| `Input` import missing in `PasteMethod.tsx` | Changed `../ui/Input` → `@/components/shared/ui/input` (shadcn) |
| Invalid JSON in `en/translation.json` | Removed extra closing brace from merge artifact |

## Verification

- `cargo check` ✅
- `bun run lint` ✅ (1 pre-existing warning)
- `bun run test` ✅ (39 tests passing, 4 test files)
- All 17 i18n JSON files validated ✅

## Notes

- "Codictate" branding preserved throughout
- `.env` stashed pre-merge (`git stash pop` to restore)
- `handy-keys` crate downloaded by cargo (dependency exists in `Cargo.toml` from prior merge) but not used
- Changes left **uncommitted** for manual review
